<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- Action -->
    <record id="asset_computer_action" model="ir.actions.act_window">
        <field name="name">Computer</field>
        <field name="res_model">assets_computer</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- FORM VIEW -->
    <record id="asset_computer_form" model="ir.ui.view">
        <field name="name">assets.computer.form</field>
        <field name="model">assets_computer</field>
        <field name="arch" type="xml">

            <form string="Computer">
                <sheet>

                    <notebook>

                        <!-- GENERAL INFORMATION -->
                        <page string="General Information">
                            <group>
                                <group>
                                    <field name="name"/>
                                    <field name="inventoryNumber"/>
                                    <field name="serialNumber"/>
                                    <field name="is_used"/>
                                    <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" />
                                    <field name="user_id"/>
                                    <field name="category_id" />
                                    <field name="department_id"/>
                                    <field name="inventory_code" readonly="1" class="oe_inline"/>
                                    <button name="action_generate_inventory_number"
                                            type="object"
                                            string="Generate"
                                            invisible="inventory_code"
                                            class="btn-primary oe_inline"/>
                                </group>
                            </group>

                            <group string="Details">
                                <field name="details" colspan="2"/>
                            </group>

                            <group string="Monitors">
                                <field name="monitor_ids"/>
                            </group>
                        </page>

                        <!-- SPECIFICATIONS -->
                        <page string="Specifications">
                            <group>
                              
                                <group>
                                    <field name="computer_type"/>
                                    <field name="model"/>
                                    <field name="cpu"/>
                                    <field name="gpu"/>
                                    <field name="memory"/>
                                    <field name="ip_address"/>
                                </group>

                                <group string="Scores">
                                    <field name="cpu_score" readonly="1"/>
                                    <field name="gpu_score" readonly="1"/>
                                    <field name="ram_score" readonly="1"/>
                                    <field name="performance_score" readonly="1"/>

                                    <button
                                        name="action_compute_score"
                                        type="object"
                                        string="Get Score"
                                        class="btn-primary"
                                    />
                                </group>
                            </group>
                        </page>


                        <!-- FINANCIAL -->
                        <page string="Financial">
                            <group>
                                <field name="price"/>
                                <field name="project_id"/>
                                <field name="company_id" readonly="1"/>
                            </group>
                        </page>

                        <!-- HISTORY -->
                        <page string="History">

                            <group>
                                <button name="action_create_history"
                                    string="Add History"
                                    type="object"
                                    class="btn-primary"/>   
                             </group>

                            <field name="history_ids">
                                <list>
                                    <field name="history_type"/>
                                    <field name="notes"/>
                                    <field name="expense_id"/>
                                </list>

                                <form>
                                    <group>
                                        <field name="history_type"/>
                                        <field name="notes"/>
                                        <field name="expense_id"/>
                                        <field name="asset" invisible="1"/>
                                    </group>
                                </form>

                            </field>

                        </page>

                    </notebook>

                </sheet>
            </form>

        </field>
    </record>

    <record id="assets_history_action" model="ir.actions.act_window">
        <field name="name">Asset History</field>
        <field name="res_model">assets_history</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- LIST VIEW -->
    <record id="asset_computer_list" model="ir.ui.view">
        <field name="name">assets.computer.list</field>
        <field name="model">assets_computer</field>
        <field name="arch" type="xml">
            <list string="Computers">
                <field name="tag_ids" widget="many2many_tags" options="{'color_field':'color'}" />
                <field name="name"/>
                <field name="user_id"/>
                <field name="computer_type"/>
                <field name="model"/>
                <field name="inventoryNumber" />
                <field name="serialNumber"/>
                <field name="cpu"/>
                <field name="gpu"/>
                <field name="performance_score"/>
                <field name="price"/>
                
            </list>
        </field>
    </record>

    <record id="action_compute_score" model="ir.actions.server">
        <field name="name">Get Score</field>
        <field name="model_id" ref="model_assets_computer"/>
        <field name="binding_model_id" ref="model_assets_computer"/>
        <field name="state">code</field>
        <field name="code"><![CDATA[
        action = records.action_compute_score()
action
        ]]></field>
    </record>

    
    <record id="action_get_inventory_number" model="ir.actions.server">
        <field name="name">Generate inventory number </field>
        <field name="model_id" ref="model_assets_computer"/>
        <field name="binding_model_id" ref="model_assets_computer"/>
        <field name="state">code</field>
        <field name="code"><![CDATA[
        action = records.action_generate_inventory_number()
action
        ]]></field>
    </record>

    <!-- MENU -->
    <menuitem id="menu_assets_computer"
              name="Computers"
              parent="menu_assets_pc"
              action="asset_computer_action"/>

</odoo>
